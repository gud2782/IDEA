<!DOCTYPE html>
<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header_content :: header_content" />

	<!-- Font-->
	<link rel="stylesheet" type="text/css" href="/css/opensans-font.css">
	<link rel="stylesheet" type="text/css" href="/fonts/material-design-iconic-font/css/material-design-iconic-font.min.css">
	<!-- Main Style Css -->
    <link rel="stylesheet" href="/css/style_blood.css"/>
	<script type="text/javascript" src="/js/jsQR.js"></script>
</head>

<!--navbar-->
<div th:replace="fragments/navbar_content :: navbar_content"/>
<!--navbar end-->
<body>
	<div class="page-content">
		<div class="form-v1-content">
			<div class="wizard-form">
		        <form class="form-register" action="#" method="post">
		        	<div id="form-total">
						<!-- SECTION 1 -->
						<h2>
							<p class="step-icon"><span>01</span></p>
							<span class="step-text">ì¡°íšŒ</span>
						</h2>
						<form id="donationForm" th:action="@{/donation/new}" th:object="${donationForm}" method="post" autocomplete="off">
						<section>
							<div class="inner">
								<div class="wizard-header">
									<h3 class="heading">ë™ë¬¼ë“±ë¡ë²ˆí˜¸ ì¡°íšŒ</h3>
									<p>ë°˜ë ¤ê²¬ ë“±ë¡ ë‹¹ì‹œ ì…ë ¥í•œ ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
								</div>
								<div class="form-row">
<!--									<div class="form-holder form-holder-1">-->
										<div class="form-holder form-holder-4">
											<input type="text" name="find_bank" id="lookup" value="ì´ë¦„" class="form-control" >
										</div>
										<div class="form-holder form-holder-1">
										<select name="registerIdx" id="register" class="form-control"  th:onchange="changeValues()" >
											<option value="">ê°•ì•„ì§€ì„ íƒ</option>
											<option th:each="register : ${registers}"
													th:value="|${register.registerIdx},${register.aniId},${register.kind},${register.neutralization}|"
													th:text="${register.aniName}"
											/>
										</select>
										</div>
<!--									</div>-->
								</div>
								<div class="form-row">
									<div class="form-holder form-holder-4">
										<input type="text" name="find_bank"  id="qrcode" value="ë™ë¬¼ë“±ë¡ë²ˆí˜¸" class="form-control" >
									</div>
									<div class="form-holder form-holder-1">
										<input type="text" name="find_bank" id="aniId1" placeholder="ë™ë¬¼ë“±ë¡ë²ˆí˜¸" class="form-control" readonly>
									</div>

								</div>
								<div class="qrBox">
									<div class="modal">
										<div class="modal_content">
											<div id="frame">
												<div id="loadingMessage" hidden>
													ğŸ¥ ë¹„ë””ì˜¤ ìŠ¤íŠ¸ë¦¼ì— ì•¡ì„¸ìŠ¤ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤<br/>ì›¹ìº ì´ í™œì„±í™”ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì‹­ì‹œì˜¤
												</div>
												<canvas id="canvas"></canvas>
											</div>
										</div>
									</div>
								</div>
							</div>
						</section>



						<!-- SECTION 2 -->
			            <h2>
			            	<p class="step-icon"><span>02</span></p>
			            	<span class="step-text">ë“±ë¡</span>
			            </h2>
			            <section>
			                <div class="inner">
			                	<div class="wizard-header">
									<h3 class="heading">í—Œí˜ˆê²¬ ì •ë³´ ë“±ë¡</h3>
									<p>Please enter your infomation and proceed to the next step so we can build your accounts.  </p>
								</div>
								<div class="form-row">
									<div class="form-holder">
										<fieldset>
											<legend>ë°˜ë ¤ê²¬ ì´ë¦„</legend>
											<input type="text" class="form-control" id="first-name" name="first-name" placeholder="ì—°ì´" required>
										</fieldset>
									</div>
									<div class="form-holder">
										<fieldset>
											<legend>ë™ë¬¼ë“±ë¡ë²ˆí˜¸</legend>
											<input type="text" id="aniId" th:id="aniId" th:for="register" class="form-control" th:field="*{register.aniId}" placeholder="ë™ë¬¼ë“±ë¡ë²ˆí˜¸" readonly>

											<!--											<input type="text" class="form-control" id="aniId" name="last-name" placeholder="410160020250774" required>-->
										</fieldset>
									</div>
								</div>
								<div class="form-row">
									<div class="form-holder">
										<fieldset>
											<legend>ëª¸ë¬´ê²Œ</legend>
											<input type="text" id="DWeight" th:id="DWeight" th:for="DWeight" class="form-control" th:field="*{DWeight}" placeholder="ëª¸ë¬´ê²Œ" required>

											<!--											<input type="text" name="your_email" id="your_email" class="form-control" pattern="[^@]+@[^@]+.[a-zA-Z]{2,6}" placeholder="3.0Kg" required>-->
										</fieldset>
									</div>
									<div class="form-holder">
										<fieldset>
											<legend>ê²¬ì¢…</legend>
											<input type="text" id="kind" th:id="kind" th:for="kind" class="form-control" th:field="*{kind}" placeholder="ê²¬ì¢…" required>

											<!--											<input type="text" class="form-control" id="phone" name="phone" placeholder="í† ì´í‘¸ë“¤" required>-->
										</fieldset>
									</div>
								</div>
								<div class="form-row">
									<div class="form-holder form-holder-2">

									</div>
								</div>
								<div class="form-row">
									<div class="form-holder form-holder-2">

									</div>
								</div>
								<div class="form-row">
									<div class="form-holder form-holder-2">
										<fieldset>
											<legend>í—Œí˜ˆ ê¸°ê´€</legend>
											<input type="text" id="DHos" th:id="DHos" th:for="DHos" class="form-control" th:field="*{DHos}" placeholder="í—Œí˜ˆ ê¸°ê´€" required>

											<!--											<input type="text" class="form-control" id="phone" name="phone" placeholder="ê±´êµ­ëŒ€í•™êµ ìˆ˜ì˜ë³‘ì›" required>-->
										</fieldset>
									</div>
								</div>
								<div class="form-row form-row-date">
									<div class="form-holder form-holder-2">
<!--										<label class="special-label">í˜ˆì•¡í˜•</label>-->
										<select name="month" id="month" class="form-control">
											<option value="TYPE" disabled selected>í˜ˆì•¡í˜•</option>
											<option value="DEA 1.1">DEA 1.1</option>
											<option value="DEA 1.2">DEA 1.2</option>
											<option value="DEA 4">DEA 4</option>
											<option value="DEA 7">DEA 7</option>
										</select>
										<div class="form-row">
											<div class="form-holder2 form-holder-2">
<!--												<input type="text" class="form-control input-border" id="ssn" name="ssn" placeholder="í—Œí˜ˆë‚ ì§œ" required>-->
											</div>

										</div>

									</div>
									<div class="form-holder form-holder-4">
										<input type="submit" name="find_bank" id="check" value="ë“±ë¡" class="form-control" onclick="toAjax()">
										<input type="submit" name="find_bank"  value="ì´ë¯¸ì§€" class="form-control" onclick="imgfileUpload()">
										<input type="submit" id="upimg" value="/img/logo2_200x60.png" onclick="readTextFile('file:///C:/Users/lhn14/Desktop/idea_img/logo2_200x60.png')" alt="pay-1">
									</div>
								</div>

							</div>
			            </section>

			            <!-- SECTION 3 -->
			            <h2>
			            	<p class="step-icon"><span>03</span></p>
			            	<span class="step-text">ì™„ë£Œ</span>
			            </h2>
			            <section>
			                <div class="inner">
			                	<div class="wizard-header">
									<h3 class="heading">THANK YOU!</h3>
									<p>Please enter your infomation and proceed to the next step so we can build your accounts.</p>
								</div>
								<div class="form-row">
			                		<div class="form-holder form-holder-2">
			                			<input type="radio" class="radio" name="radio1" id="plan-1" value="plan-1">
			                			<label class="plan-icon plan-1-label" for="plan-1">
		                					<img src="/img/form-v1-icon-2.png" alt="pay-1">
			                			</label>
			                			<div class="plan-total">
		                					<span class="plan-title">ì ‘ì¢… ì •ë³´ ë“±ë¡</span>
		                					<p class="plan-text">Pellentesque nec nam aliquam sem et volutpat consequat mauris nunc congue nisi.</p>
		                				</div>
			                			<input type="radio" class="radio" name="radio1" id="plan-2" value="plan-2">
			                			<label class="plan-icon plan-2-label" for="plan-2">
			                					<img src="/img/form-v1-icon-2.png" alt="pay-1">
			                			</label>
			                			<div class="plan-total">
		                					<span class="plan-title">ìˆ˜í˜ˆê²¬ ì •ë³´ ë“±ë¡</span>
		                					<p class="plan-text">Pellentesque nec nam aliquam sem et volutpat consequat mauris nunc congue nisi.</p>
		                				</div>
										<input type="radio" class="radio" name="radio1" id="plan-3" value="plan-3" checked>
										<label class="plan-icon plan-3-label" for="plan-3">
		                					<img src="/img/form-v1-icon-3.png" alt="pay-2">
										</label>
										<div class="plan-total">
		                					<span class="plan-title">ë§ˆì´í˜ì´ì§€</span>
		                					<p class="plan-text">Pellentesque nec nam aliquam sem et volutpat consequat mauris nunc congue nisi.</p>
		                				</div>
			                		</div>
			                	</div>
							</div>
			            </section>
						</form>
		        	</div>
		        </form>
			</div>
		</div>
	</div>
	<script src="/js/jquery-3.3.1.min.js"></script>
	<script src="/js/jquery.steps.js"></script>
	<script src="/js/main.js"></script>

<!--ë©”íƒ€ë°ì´í„° ì—…ë¡œë“œ-->
	<script type="text/javascript" th:inline="javascript">

		function toAjax() {

			// console.log("1");

			// var aniName =$("#aniName").val();
			var aniId =$("#aniId").val();
			var kind =$("#kind").val();
			var DWeight =$("#DWeight").val();
			var DDate =$("#DDate").val();
			var DHos =$("#DHos").val();
			var type =$("#type").val();
			var DPack =$("#DPack").val();



			// var donationForm = $("#donationForm");
			// var x = document.getElementById("donationForm");
			// var text="";
			// var i;
			// for (i=0; 1<x.length; i++){
			//     text += x.elements[i].value + "<br>";
			//
			//     }
			// console.log(text);



			let http = new XMLHttpRequest();
			let url = 'https://metadata-api.klaytnapi.com/v1/metadata';
			let data= {
				"metadata": {
					"name": "í˜•ìš°í…ŒìŠ¤íŠ¸",
					"description": "description example for kip17 token",
					"image": "https://metadata-store.klaytnapi.com/e2d83vdb-c108-823c-d5f3-69vdf2d871c51/4a85e6be-3215-93e6-d8a9-3a7d633584e7.png",
					// "aniName": aniName,
					"aniId" : aniId,
					"kind" : kind,
					"DWeight" : DWeight,
					"DDate" : DDate,
					"DHos" : DHos,
					"type" : type,
					"DPack" : DPack

				}
			}

			// console.log("aJson.metadata >>> "+aJson.metadata.aniId)
			// console.log("aJson.metadata >>> "+aJson.metadata.kind)
			// console.log("aJson.metadata >>> "+aJson.metadata.DWeight)
			// console.log("aJson.metadata >>> "+aJson.metadata.DDate)
			// console.log("aJson.metadata >>> "+aJson.metadata.DHos)
			// console.log("aJson.metadata >>> "+aJson.metadata.type)
			// console.log("aJson.metadata >>> "+aJson.metadata.DPack)

			http.open('POST', url, true);



			//Send the proper header information along with the request
			http.setRequestHeader('Content-type', 'application/json');
			http.setRequestHeader('Authorization', 'Basic S0FTS1IwQTNDMVA4SUNRS0Q5V1dJSThTOmZHeVZodlFieUh1dTdHdWl1TjV2eWdodmdlSU9fcXl5ZlhqYUlUVkc=');
			http.setRequestHeader('x-chain-id', '1001');
			http.onreadystatechange = function() {//Call a function when the state changes.
				if(http.readyState == 4 && http.status == 200) {

					alert(http.responseText);


				}
			}
			http.send(JSON.stringify(data));

		};
//ì´ë¯¸ì§€ íŒŒì¼ ë³€í™˜
		function readTextFile(file)
		{
			var rawFile = new XMLHttpRequest();
			rawFile.open("GET", file, false);
			rawFile.onreadystatechange = function ()
			{
				if(rawFile.readyState === 4)
				{
					if(rawFile.status === 200 || rawFile.status == 0)
					{
						var allText = rawFile.responseText;
						alert(allText);
					}
				}
			}
			rawFile.send(null);
		}

		// readTextFile("file:///C:/Users/lhn14/Desktop/idea_img/logo2_200x60.png");

	//	ë©”íƒ€ë°ì´í„° ì—ì…‹ ì—…ë¡œë“œ

		function imgfileUpload() {


			let http = new XMLHttpRequest();
			var uploadImg = new FormData();
			uploadImg.append('img',document.getElementById('upimg').files[0]);
			let url = 'https://metadata-api.klaytnapi.com/v1/metadata/asset';
			let data= {
				"file" : img
			};
			let file = img;


			console.log("file >>> "+file)
			// console.log("data.asset >>> "+aJson.metadata.file)


			http.open('POST', url, true);



			//Send the proper header information along with the request
			http.setRequestHeader('Content-type', 'multipart/form-data');
			http.setRequestHeader('Authorization', 'Basic S0FTS1IwQTNDMVA4SUNRS0Q5V1dJSThTOmZHeVZodlFieUh1dTdHdWl1TjV2eWdodmdlSU9fcXl5ZlhqYUlUVkc=');
			http.setRequestHeader('x-chain-id', '1001');
			http.onreadystatechange = function() {//Call a function when the state changes.
				if(http.readyState == 4 && http.status == 200) {

					alert(http.responseText);


				}
			}
			// http.send(JSON.stringify(data));
			http.send(file);

		};


	</script>


	<script>
		const loginText = document.querySelector(".title-text .login");
		const loginForm = document.querySelector("form.login");
		const loginBtn = document.querySelector("label.login");
		const signupBtn = document.querySelector("label.signup");
		// const signupLink = document.querySelector("form .signup-link a");
		signupBtn.onclick = (()=>{
			loginForm.style.marginLeft = "-50%";
			loginText.style.marginLeft = "-50%";
		});
		loginBtn.onclick = (()=>{
			loginForm.style.marginLeft = "0%";
			loginText.style.marginLeft = "0%";
		});
		signupLink.onclick = (()=>{
			signupBtn.click();
			return false;
		});
	</script>
	<script th:inline="javascript">

		function getType(Event) {
			document.getElementById('result').innerText =
					Event.target.value;
		}
		function changeValues() {


			//selectëœ ê°’ ê°€ì ¸ì˜¤ë©´ì„œ , ê¸°ì¤€ íŒŒì‹±
			let selectOption = document.getElementById("register").value.split(",");

			//ë³€ìˆ˜ ì„ ì–¸
			let aniId,kind,neutralization;

			//ê°ê° íŒŒì‹±ëœ ë³€ìˆ˜ë“¤ ì €ì¥
			for (let idx=0; idx <  4; idx++){
				let value = selectOption [idx];
				if(idx == 1){
					aniId= value;
				}else if(idx == 2){
					kind= value;
				}else if(idx==3){
					neutralization= value;
				}
			}


			//input idê°’ìœ¼ë¡œ ì €ì¥ëœ ê°’ ì„¤ì • ë° ë¿Œë ¤ì£¼ê¸°

			document.getElementById('aniId').value = aniId;
			document.getElementById('aniId1').value = aniId;
			document.getElementById('kind').value = kind;
			document.getElementById('neutralization').value = neutralization;

		}




	</script>
	<script type="text/javascript">
		$(document).ready(function () {
			$.datepicker.regional['ko'] = {
				closeText: 'ë‹«ê¸°',
				prevText: 'ì´ì „ë‹¬',
				nextText: 'ë‹¤ìŒë‹¬',
				currentText: 'ì˜¤ëŠ˜',
				monthNames: ['1ì›”(JAN)','2ì›”(FEB)','3ì›”(MAR)','4ì›”(APR)','5ì›”(MAY)','6ì›”(JUN)',
					'7ì›”(JUL)','8ì›”(AUG)','9ì›”(SEP)','10ì›”(OCT)','11ì›”(NOV)','12ì›”(DEC)'],
				monthNamesShort: ['1ì›”','2ì›”','3ì›”','4ì›”','5ì›”','6ì›”',
					'7ì›”','8ì›”','9ì›”','10ì›”','11ì›”','12ì›”'],
				dayNames: ['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† '],
				dayNamesShort: ['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† '],
				dayNamesMin: ['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† '],
				weekHeader: 'Wk',
				dateFormat: 'yy-mm-dd',
				firstDay: 0,
				isRTL: false,
				showMonthAfterYear: true,
				yearSuffix: '',
				buttonText: "ë‹¬ë ¥",
				changeMonth: true,
				changeYear: true,
				showButtonPanel: true,
				yearRange: 'c-99:c+99',
			};
			$.datepicker.setDefaults($.datepicker.regional['ko']);

			$('#DDate').datepicker();
			$('#DDate').datepicker("option", "maxDate", $("#DDate").val());


		});
	</script>
</body><!-- This templates was made by Colorlib (https://colorlib.com) -->
<!--footer -->
<div th:replace="fragments/footer_content :: footer_content" />
<!--footer-end -->
</html>