<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: header" />
<link rel="stylesheet" href="http://code.jquery.com/ui/1.8.18/themes/base/jquery-ui.css" type="text/css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="http://code.jquery.com/ui/1.8.18/jquery-ui.min.js"></script>


<script type="text/javascript">
    $(document).ready(function () {
        $.datepicker.regional['ko'] = {
            closeText: '닫기',
            prevText: '이전달',
            nextText: '다음달',
            currentText: '오늘',
            monthNames: ['1월(JAN)','2월(FEB)','3월(MAR)','4월(APR)','5월(MAY)','6월(JUN)',
                '7월(JUL)','8월(AUG)','9월(SEP)','10월(OCT)','11월(NOV)','12월(DEC)'],
            monthNamesShort: ['1월','2월','3월','4월','5월','6월',
                '7월','8월','9월','10월','11월','12월'],
            dayNames: ['일','월','화','수','목','금','토'],
            dayNamesShort: ['일','월','화','수','목','금','토'],
            dayNamesMin: ['일','월','화','수','목','금','토'],
            weekHeader: 'Wk',
            dateFormat: 'yy-mm-dd',
            firstDay: 0,
            isRTL: false,
            showMonthAfterYear: true,
            yearSuffix: '',
            buttonText: "달력",
            changeMonth: true,
            changeYear: true,
            showButtonPanel: true,
            yearRange: 'c-99:c+99',
        };
        $.datepicker.setDefaults($.datepicker.regional['ko']);

        $('#VDate').datepicker();
        $('#VDate').datepicker("option", "maxDate", $("#VDate").val());
        $('#VDate').datepicker("option", "onClose", function ( selectedDate ) {
            $("#VDate").datepicker( "option", "minDate", selectedDate );
        });

        $('#NDate').datepicker();
        $('#NDate').datepicker("option", "maxDate", $("#NDate").val());
        $('#NDate').datepicker("option", "onClose", function ( selectedDate ) {
            $("#NDate").datepicker( "option", "minDate", selectedDate );
        });

    });
</script>
<body>

<div class="container">
    <div th:replace="fragments/bodyHeader :: bodyHeader"/>

    <form role="form" action="/vc/new" th:object="${vaccineForm}" method="post">


        <div class="form-group">
            <label for="register">강아지</label>

            <select name="registerIdx" id="register" class="form-control" th:onchange="changeValues()"  >
                <option value="">강아지선택</option>
                <option th:each="register : ${registers}"
                        th:value="|${register.registerIdx},${register.aniId}|"
                        th:text="${register.aniName}"
                />

            </select>

            <label for="register">1차 선택</label>
            <select name="first" id="first" class="form-control"  >
                <option value="">1차 선택</option>
                <option th:each="first : ${T(com.likeadog.idea.enumCollection.FirstStatus).values()}"
                        th:value="${first}" th:text="${first}"
                />

            </select>




            <label for="register">2차 선택</label>
            <select name="second" id="second" class="form-control" >
                <option value="">2차 선택</option>
                <option th:each="second : ${T(com.likeadog.idea.enumCollection.SecondStatus).values()}"
                        th:value="${second}" th:text="${second}"
                />

            </select>

            <label for="register">3차 선택</label>
            <select name="third" id="third" class="form-control"  >
                <option value="">3차 선택</option>
                <option th:each="third : ${T(com.likeadog.idea.enumCollection.ThirdStatus).values()}"
                        th:value="${third}" th:text="${third}"
                />

            </select>
        </div>


        <div class="form-group">
            <label th:for="register">동물등록번호</label>
            <input th:id="regidx"  type="text"  class="form-control" readonly>
        </div>

        <div class="form-group">
            <label th:for="VNumber"접종차수</label>
            <input type="text" th:field="*{VNumber}" class="form-control"
                   placeholder="Qr코드를 입력하세요".>
        </div>

        <div class="form-group">
            <label th:for="VDate">접종 날짜</label>
            <input th:id="VDate" type="text" th:field="*{VDate}" class="form-control"
                    autocomplete="off">
        </div>

        <div class="form-group">
            <label th:for="NDate">다음 날짜</label>
            <input th:id="NDate" type="text" th:field="*{NDate}" class="form-control"
                   autocomplete="off">
        </div>


        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
    <div th:replace="fragments/footer :: footer" />
</div>








<script th:inline="javascript">



    function changeValues() {


        //select된 값 가져오면서 , 기준 파싱
        let selectOption = document.getElementById("register").value.split(",");

        //변수 선언
        let aniId,kind,neutralization;

        //각각 파싱된 변수들 저장
        for (let idx=0; idx <  4; idx++){
            let value = selectOption [idx];
            if(idx == 1){
                aniId= value;
            }else if(idx == 2){
                kind= value;
            }else if(idx==3){
                neutralization= value;
            }
        }


        //input id값으로 저장된 값 설정 및 뿌려주기
        document.getElementById('regidx').value = aniId;
        document.getElementById('kind').value = kind;
        document.getElementById('neutralization').value = neutralization;

    }



</script>

</body>

</html>